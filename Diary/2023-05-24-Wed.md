## 昨日学习内容复习
## 今日学习内容
### SX1276
### Lora 调制解调器有三种数字接口
1. 静态配置寄存器
2. 状态寄存器
3. FIFO数据缓存
### Lora 配置寄存器
配置寄存器可通过SPI访问，寄存器在任何设备模式下均可读，但是只有在睡眠和待机模式下可写。
### 状态寄存器
状态寄存器在接收机运行过程中提供状态信息
### Lora 模式FIFO数据缓存
除了睡眠模式其他操作模式均可读
只有在待机模式下才允许写入
详情见Datasheet
器件被设置为睡眠模式时 FIFO被清空
器件被切换到Lora 其他操作模式时FIFO数据缓存中的数据则保持不变
当一组新的数据被写入已被占用的缓存单元时，FIFO数据缓存不能自行清空（除非器件被设置成睡眠模式）原有的数据只是覆盖这些数据
![](https://private-warehouse-1317335037.cos.ap-guangzhou.myqcloud.com/Test/Screenshot%202023-05-24%20142447.png)
FIFO大小256byte
RegFifoTxBaseAddr 要发送信息的起始位置 默认0X80
RegFifoRxBaseAddr 接收操作中写入缓存的起始位置 默认0x00
通过SPI接口读取或写入当前数据的FIFO数据缓存单元由指针RegFifoAddrPtr 定义因此在写入或读取操作前，必须将该指针初始化为对应的基地址。FIFO数据缓存（RegFifo)读取数据或向FIFO数据缓存写入数据后地址将自动增值
在成功完成数据接收操作时，寄存器RegRxNbBytes 会定义待写入数据的所占缓存单元的大小
RegPayloadLength 则显示待发送数据所占用的缓存单元的大小。
在隐式报头模式下，寄存器RegRxNbBytes是无效的，因为此时由效负载字节数必须是已知的，而显式包头模式下，寄存器RegFifoRxCurrentAddr显示最后接收的数据包在FIFO数据缓存中的存储位置，因此通过将寄存器RegFifoAddrPtr指向寄存器RegFifoRxCurrentAddr即可轻松读取该数据包
### Lora 调制解调器操作模式
![](https://private-warehouse-1317335037.cos.ap-guangzhou.myqcloud.com/Test/Screenshot%202023-05-24%20145456.png)
### 数据发送序列
#### 发送模式
在发送模式下，仅在需要发送数据包数据的时候才会启动射频模块、PLL模块、以及PA模块 这样可以优化功率消耗
![](https://private-warehouse-1317335037.cos.ap-guangzhou.myqcloud.com/Test/Screenshot%202023-05-24%20151443.png)
#### 发送模式
数据接收序列
![](https://private-warehouse-1317335037.cos.ap-guangzhou.myqcloud.com/Test/Screenshot%202023-05-24%20151655.png)
1. 单一模式
在这种模式下调制解调器在给定的时间窗口内搜索前导码。如果在该时间窗口结束时还未找到前导码，则芯片会产生Rxtimeout中断信号并切换回待机模式。时间窗口长度由RegSymbTimeout寄存器定义，必须为4（调制解调器获取preamble锁的最短时间）到1023个symbol ,缺省值为5。如果窗口时间未发现前导码，则会产生RxTimeout中断信号，同事芯片自动切换回待机模式。
在有效负载结束时，如果负载CRC无效，则会产生RxDone中信号及PayloadCrcError中断信号。然而，即使CRC无效任然可以在FIFO数据缓存中写入数据，以便后续进行处理。RXDone中断产生后芯片切换回待机模式。
3. 连续接收模式
RegPreambleMsb和RegPreambleLsb设置前preamble的长度
为了从FIFO数据缓存检索接收数据，用户必须保证状态寄存器RegirqFlags中VaildHeader PayloadCrcError RxDone 以及Rxtimeout等中断信号未意外生效，以确保数据包接收成功终止（即不应设置任何标志位）
每次接收到RxDone中断信号时，锁存变量start_address中的RegFifoRxByTeAddr寄存器的内容，寄存器实时显示由Lora接收调制解调器写入数据缓存的最后一个字节的地址+1通过这种方式可以保证变量start_address总是包含下一个数据包的起始地址
### [SX1278中断详解](https://blog.csdn.net/weixin_44481398/article/details/89397743?spm=1001.2101.3001.6650.5&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-89397743-blog-89597513.235%5Ev36%5Epc_relevant_default_base3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-5-89397743-blog-89597513.235%5Ev36%5Epc_relevant_default_base3&utm_relevant_index=10)
### CAD 信道活动检测模式[](https://blog.csdn.net/qq_15391889/article/details/81050643?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168492584916800192298992%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=168492584916800192298992&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-81050643-null-null.142^v87^koosearch_v1,239^v2^insert_chatgpt&utm_term=cad%E4%BF%A1%E9%81%93%E6%B4%BB%E5%8A%A8%E6%A3%80%E6%B5%8B&spm=1018.2226.3001.4187)

1.在无线传感器网络设计中，无线收发机的节能是一个非常关键的问题。为进一步减小功耗，只有通过减少无用的工作时间。无线通信时，射频大部分处于接收状态，也是主要的能量消耗所在。当无线传感器网络中信息量较小，而节点必须随时准备接数据。理想的状态是当有信息需要接收时，节点处于接收状态，无信息接收时，节点处于睡眠状态。这就需要无线唤醒技术，这里的无线唤醒从现象上看，好像发射机把接收机从睡眠中唤醒，其实接收机是周期性得自动醒来，在醒来的极短时间内若没有发现呼叫信号，则马上睡眠，若正好有呼叫信号，则被唤醒而进入接收状，而跳频扩频使用的是CAD信道检测

### 温度测量
除了睡眠和待机模式之外，均可采用独立的温度测量模块对温度进行量测。该模块默认开启，在TempMonitorOff被设置为1时会关闭。温度测量的结果存储在RegTemp和TempValue中。

### 芯片复位
芯片上电后便会触发上电复位POR，还可以通过引脚7进行手动复位
POR 断开VDD 重新上电后等待10ms在POR周期结束后再开始通过SPI总线进行通信
![](https://private-warehouse-1317335037.cos.ap-guangzhou.myqcloud.com/Test/Screenshot%202023-05-24%20213146.png)

### 手动复位
引脚7的电平拉低100微妙然后释放，接着用户等待5ms再使用芯片![](https://private-warehouse-1317335037.cos.ap-guangzhou.myqcloud.com/Test/Screenshot%202023-05-24%20213527.png)

### DSSS 直接序列扩频
在Lora调制中，频谱的扩展是通过产生频率连续变化的chrip信号来实现de
## 特殊事件
## 英语单词
## 你今天遇到的三件好事，以及为什么他们是好事
## 你今天学到了什么